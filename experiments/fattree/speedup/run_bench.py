#!/usr/bin/env python3

import os
import subprocess

tools = {
  'probnetkat': {
    'cmd': lambda k:
      ['./run_probnetkat.sh', str(k)],
    'envs': [
      { 'J': '1', 'RJ':'0', 'RN': '0' },
      { 'J': '2', 'RJ':'0', 'RN': '0' },
      # { 'J': '3', 'RJ':'0', 'RN': '0' },
      { 'J': '4', 'RJ':'0', 'RN': '0' },
      # { 'J': '5', 'RJ':'0', 'RN': '0' },
      { 'J': '6', 'RJ':'0', 'RN': '0' },
      # { 'J': '7', 'RJ':'0', 'RN': '0' },
      { 'J': '8', 'RJ':'0', 'RN': '0' },
      # { 'J': '9', 'RJ':'0', 'RN': '0' },
      { 'J': '10', 'RJ':'0', 'RN': '0' },
      # { 'J': '11', 'RJ':'0', 'RN': '0' },
      { 'J': '12', 'RJ':'0', 'RN': '0' },
      # { 'J': '13', 'RJ':'0', 'RN': '0' },
      { 'J': '14', 'RJ':'0', 'RN': '0' },
      # { 'J': '15', 'RJ':'0', 'RN': '0' },
      { 'J': '16', 'RJ':'0', 'RN': '0' },
      # { 'J': '17', 'RJ':'0', 'RN': '0' },
      { 'J': '18', 'RJ':'0', 'RN': '0' },
      # { 'J': '19', 'RJ':'0', 'RN': '0' },
      { 'J': '20', 'RJ':'0', 'RN': '0' },
      # { 'J': '21', 'RJ':'0', 'RN': '0' },
      { 'J': '22', 'RJ':'0', 'RN': '0' },
      # { 'J': '23', 'RJ':'0', 'RN': '0' },
      { 'J': '24', 'RJ':'0', 'RN': '0' },
      # { 'J': '25', 'RJ':'0', 'RN': '0' },
      { 'J': '26', 'RJ':'0', 'RN': '0' },
      # { 'J': '27', 'RJ':'0', 'RN': '0' },
      { 'J': '28', 'RJ':'0', 'RN': '0' },
      # { 'J': '29', 'RJ':'0', 'RN': '0' },
      { 'J': '30', 'RJ':'0', 'RN': '0' },
      # { 'J': '31', 'RJ':'0', 'RN': '0' },
      { 'J': '32', 'RJ':'0', 'RN': '0' },
      # { 'J': '32', 'RJ':'1', 'RN': '1' },
      { 'J': '32', 'RJ':'2', 'RN': '1' },
      # { 'J': '32', 'RJ':'3', 'RN': '1' },
      { 'J': '32', 'RJ':'4', 'RN': '1' },
      # { 'J': '32', 'RJ':'5', 'RN': '1' },
      { 'J': '32', 'RJ':'6', 'RN': '1' },
      # { 'J': '32', 'RJ':'7', 'RN': '1' },
      { 'J': '32', 'RJ':'8', 'RN': '1' },
      # { 'J': '32', 'RJ':'9', 'RN': '1' },
      { 'J': '32', 'RJ':'10', 'RN': '1' },
      # { 'J': '32', 'RJ':'11', 'RN': '1' },
      { 'J': '32', 'RJ':'12', 'RN': '1' },
      # { 'J': '32', 'RJ':'13', 'RN': '1' },
      { 'J': '32', 'RJ':'14', 'RN': '1' },
      # { 'J': '32', 'RJ':'15', 'RN': '1' },
      { 'J': '32', 'RJ':'16', 'RN': '1' },
      # { 'J': '32', 'RJ':'17', 'RN': '1' },
      { 'J': '32', 'RJ':'18', 'RN': '1' },
      # { 'J': '32', 'RJ':'19', 'RN': '1' },
      { 'J': '32', 'RJ':'20', 'RN': '1' },
      # { 'J': '32', 'RJ':'21', 'RN': '1' },
      { 'J': '32', 'RJ':'22', 'RN': '1' },
      # { 'J': '32', 'RJ':'23', 'RN': '1' },
      { 'J': '32', 'RJ':'24', 'RN': '1' },
      # { 'J': '32', 'RJ':'25', 'RN': '1' },
      { 'J': '32', 'RJ':'26', 'RN': '1' },
      # { 'J': '32', 'RJ':'27', 'RN': '1' },
      { 'J': '32', 'RJ':'28', 'RN': '1' },
      # { 'J': '32', 'RJ':'29', 'RN': '1' },
      { 'J': '32', 'RJ':'30', 'RN': '1' },
      # { 'J': '32', 'RJ':'31', 'RN': '1' },
      { 'J': '32', 'RJ':'16', 'RN': '2' },
      # { 'J': '32', 'RJ':'17', 'RN': '2' },
      { 'J': '32', 'RJ':'18', 'RN': '2' },
      # { 'J': '32', 'RJ':'19', 'RN': '2' },
      { 'J': '32', 'RJ':'20', 'RN': '2' },
      # { 'J': '32', 'RJ':'21', 'RN': '2' },
      { 'J': '32', 'RJ':'22', 'RN': '2' },
      # { 'J': '32', 'RJ':'23', 'RN': '2' },
      { 'J': '32', 'RJ':'24', 'RN': '2' },
      # { 'J': '32', 'RJ':'25', 'RN': '2' },
      { 'J': '32', 'RJ':'26', 'RN': '2' },
      # { 'J': '32', 'RJ':'27', 'RN': '2' },
      { 'J': '32', 'RJ':'28', 'RN': '2' },
      # { 'J': '32', 'RJ':'29', 'RN': '2' },
      { 'J': '32', 'RJ':'30', 'RN': '2' },
      # { 'J': '32', 'RJ':'31', 'RN': '2' },
      { 'J': '32', 'RJ':'21', 'RN': '3' },
      # { 'J': '32', 'RJ':'22', 'RN': '3' },
      { 'J': '32', 'RJ':'23', 'RN': '3' },
      # { 'J': '32', 'RJ':'24', 'RN': '3' },
      { 'J': '32', 'RJ':'25', 'RN': '3' },
      # { 'J': '32', 'RJ':'26', 'RN': '3' },
      { 'J': '32', 'RJ':'27', 'RN': '3' },
      # { 'J': '32', 'RJ':'28', 'RN': '3' },
      { 'J': '32', 'RJ':'29', 'RN': '3' },
      # { 'J': '32', 'RJ':'30', 'RN': '3' },
      { 'J': '32', 'RJ':'31', 'RN': '3' },
      # { 'J': '32', 'RJ':'32', 'RN': '3' },
    ],
  },
}


def main():
  for i in range(30):
    k = 2*(i+2)
    print("k = %d" % k)
    print("=" * 80)

    for tool, data in tools.items():
      print("\n%s" % tool.capitalize())
      print("-" * 80)
      # SJS: fastest first
      for i, env in enumerate(data['envs'][::-1]):
        my_env = os.environ.copy()
        my_env.update(env)
        print("running with environment %s..." % str(env))
        run = subprocess.run(data['cmd'](k),
                             stdout=subprocess.PIPE, 
                             stderr=subprocess.PIPE,
                             env=my_env
                             )
        print("return code: %d" % run.returncode)
        if run.returncode != 0:
          print("-> errored.")
        else:
          print("-> ok.\n")
    
    print("\n\n")
  

if __name__ == "__main__":
  main()
